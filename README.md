# UniVapeCras

Проект представляет собой написанное на Vue.js одностраничное приложение для помощи с закупками бизнесу розничной продажи вейпов, табаков и кальянов в г.Краснодар.

### ТЗ

Главный поставщик собственника бизнеса выложил прайс-лист в виде xlsx файла на Гугл диск, периодически редактирует его (добавляя новые позиции, удаляя старые либо изменяя цены).
В прайс-листе около 3.5 тысяч позиций.

В таком количестве товаров было сложно быстро отслеживать изменения цен и поступление новых товаров.
Так же были "редкие, особо ценные" товары, которые выкупали "за 15 минут".
Сотрудникам приходилось буквально всё рабочее время сидеть и мониторить прайс-лист.

Клиенту необходимо было в реальном времени получать данные о новых товарах и изменении цен, дабы опережать конкурентов и разгрузить сотрудников.

### Решение

По договорённости с клиентом было принято решение, что приложение будет запускаться сотрудником клиента утром и функционировать в течение дня.
Приложение должно сравнивать прайс-лист с предыдущей версией каждые 5 минут и высылать изменения (интересовали новые товары и изменения параметров текущих) в телеграм-чат клиента.

### Реализация

Первым делом необходимо было реализовать скачивание файлов с Гугл диска.
Для этого было создано и настроено приложение в Гугл консоли (подтверждения в гугл приложение не потребовало, оно требуется от 100 пользователей, т.е. нас устраивало приложение в тестовом режиме).
Непосредственно в коде для скачивания использовался [vue-google-api](https://github.com/vertcitron/vue-google-api).
При запуске приложения сотрудник должен был войти в приложении в специально созданный для этого гугл-аккаунт.

Для преобразования xlsx-файла в удобный для хранения и сравнения формат использовался плагин [xlsx](https://www.npmjs.com/package/xlsx).
Плагин позволяет преобразовать excel-файлы в JSON формат и наоборот — результирующий файл сравнения так же собирался в xlsx формат перед отсылкой в телеграм.

Наконец, дабы передавать результат сравнения в виде xlsx файла в телеграм, было создано приложение телеграма в консоли телеграма.
При запуске приложения UniVapeCras сотрудник клиента должен был получить код от апи телеграма, после введения в соответствующее поле которого можно было запустить приложение.
С технической стороны использовался плагин [telegram-api-vue](https://github.com/Penguin3007/TelegramApiVue). С документацией у телеграма достаточно плохо, но, как всегда, выручил гугл.

Ввиду того, что клиент хотел бесплатное обслуживание приложения, а гугл-апи наотрез отказывался запускаться из html-файла из браузера, с виртуального хостинга или даже посредством сайта с http-протоколом, 
приложение было собрано в один файл (в этом помог плагин [html-webpack-plugin](https://github.com/jantimon/html-webpack-plugin) в паре с [html-webpack-inline-source-plugin](https://github.com/dustinjackson/html-webpack-inline-source-plugin)) и установлено на бесплатный хостинг https://googiehost.com.
Таким образом, сотрудник клиента заходил на сайт через браузер рабочего компьютера утром, запускал программу, после чего она работала до закрытия страницы.

По дизайну особых требований не было; дизайн сделан достаточно просто и понятно. На сайт можно зайти и запустить приложение с телефона.
